android_ndk_r13 path, pjsip path, swig path should be given in the environment variable.
Gradle should be installed in the system.

Componnets
-------------
The project is divided into 4 parts
##1. PJSIP
Current version 2.8 , in c++.

##2. PJSIP - JNI

##3. Plivoendpoint

##4. OpenSSL

Build
----
## build pjsip
```
$ make build_pjsip
```

this will displpay a set of comments, from those choose a function to build pjsip for the required architecture
#set pjproject-2.8 path in the environment variable

## builds the jni and the gradle
```
$ make all
```

## builds the jni and the gradle without having any backend logs
```
$ make release
```

## Envrionment varibles
export following variables.

User Java 1.8 ( 52 )
```
declare -x JAVA_HOME=/Library/Java/JavaVirtualMachines/jdk1.8.0_172.jdk/Contents/Home
```

For SDK path
```
declare -x ANDROID_HOME="/Users/altanaibisht/Library/Android/sdk"
declare -x ANDROID_SDK="/Users/altanaibisht/Library/Android/sdk"
```

For ndk path
```
declare -x ANDROID_NDK="/Users/altanaibisht/Downloads/android-ndk-r13b"
declare -x ANDROID_NDK_ROOT="/Users/altanaibisht/Downloads/android-ndk-r13b"
```
or point to IDE NDK path
```
declare -x ANDROID_NDK="/Users/altanaibisht/Library/Android/sdk/ndk-bundle"
declare -x ANDROID_NDK_ROOT="/Users/altanaibisht/Library/Android/sdk/ndk-bundle"
```

For PJSIP project path
```
export MACHINE_NAME=arm
export OS_NAME=linux
export HOST_NAME=unix
export CC_NAME=gcc

declare -x PJDIR=/Users/altanaibisht/StudioProjects/plivo-android-sdk/pjsip/pjproject-2.6
declare -x PJSIP_DIR=/Users/altanaibisht/StudioProjects/plivo-android-sdk/pjsip/pjproject-2.6
declare -x PJSIP_PATH=/Users/altanaibisht/StudioProjects/plivo-android-sdk/pjsip/pjproject-2.6
```

Set NDK toolchain and example location to copy the plivoendpoint.jar
```
export NDK_PROJECT_PATH=/Users/altanaibisht/StudioProjects/plivo-android-sdk/pjsip-jni
export NDK_TOOLCHAIN_VERSION=4.9
export PLIVO_ANDROID_EXAMPLES_PATH=/Users/altanaibisht/StudioProjects/plivo-android-sdk2-examples
```

Set SWIG_PATH
```
export SWIG_PATH=/Users/altanaibisht/StudioProjects/swig-3.0.12
```

## Build PJSIP

ref : https://trac.pjsip.org/repos/wiki/Getting-Started/Android
```
cd pjsip/pjproject-2.8
./configure
make
```

## Build JNI
```
../android-ndk-r13b/ndk-build
```

## Build All
To build plivoendpoint jar

```
./allbuild.sh
```

To change the endviornmnet that SDK is pointing to make changes in following locations
- pjsip-jni -> jni -> plivo_app_callback.cpp
```
#define SIP_DOMAIN "phone.test.plivo.com"
```
and  plivoEndpoint -> src -> com -> plivo -> endpoint -> Outgoing.java / plivoEndpoint -> Outgoing.java -> call and callH
```
String sipUri = "sip:" + dest + "@phone.test.plivo.com";
```

Build on Mac
------------
# your android ndk path
export ANDROID_NDK_ROOT=/Users/anil/Library/Android/sdk/android-ndk-r13b/
export ANDROID_NDK=/Users/anil/Library/Android/sdk/android-ndk-r13b/

# your pjsip dir path
export PJSIP_DIR=/Users/anil/Desktop/office/cflag/flx/plv/plivo-android-sdk/pjsip/pjproject-2.8/
export PJDIR=/Users/anil/Desktop/office/cflag/flx/plv/plivo-android-sdk/pjsip/pjproject-2.8/

# any modifications on the core lib (libpjplivo.so), build jni
# this will generate .so files for all architectures at plivo-android-sdk/build/outputs/libs
./gen_jni.sh

# build .jar or .aar for prod
./gen_endpoint.sh

# build .jar or .aar for stage
./gen_endpoint.sh stage

# build .jar or .aar for QA
./gen_endpoint.sh qa


